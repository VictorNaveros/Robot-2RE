{% extends 'base.html' %}
{% load static %}

{% block title %}Quiz de Reciclaje - ROBOT 2R.E{% endblock %}

{% block content %}

<!-- Pantalla de inicio -->
<section id="screen-inicio" class="min-h-screen bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center py-20">
    <div class="container mx-auto px-6">
        <div class="max-w-2xl mx-auto bg-white rounded-3xl shadow-2xl p-8 md:p-12 text-center fade-in">
            <div class="text-7xl mb-6">ğŸ§ </div>
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                Quiz de Reciclaje
            </h1>
            <p class="text-xl text-gray-600 mb-8">
                Demuestra cuÃ¡nto sabes sobre reciclaje y compite por el primer lugar
            </p>
            
            <div class="bg-green-50 rounded-xl p-6 mb-8">
                <h3 class="font-bold text-green-700 mb-3">ğŸ“‹ Instrucciones:</h3>
                <ul class="text-left text-gray-700 space-y-2">
                    <li>âœ“ 10 preguntas sobre reciclaje</li>
                    <li>âœ“ Cada respuesta correcta = 10 puntos</li>
                    <li>âœ“ Bonus de velocidad = +2 puntos</li>
                    <li>âœ“ Compite en la tabla de clasificaciÃ³n</li>
                </ul>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2 text-left">
                    Ingresa tu nombre:
                </label>
                <input 
                    type="text" 
                    id="nombre-jugador"
                    maxlength="50"
                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600 focus:border-transparent text-lg"
                    placeholder="Tu nombre"
                >
                <p id="error-nombre" class="text-red-600 text-sm mt-2 hidden">Por favor ingresa tu nombre</p>
            </div>
            
            <button 
                onclick="iniciarQuiz()"
                class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-lg text-xl transition transform hover:scale-105"
            >
                Â¡Empezar! ğŸš€
            </button>
            
            <a href="{% url 'home' %}" class="block mt-4 text-green-600 hover:text-green-800 font-semibold">
                â† Volver al inicio
            </a>
        </div>
    </div>
</section>

<!-- Pantalla del quiz -->
<section id="screen-quiz" class="hidden min-h-screen bg-gradient-to-br from-green-500 to-green-700 py-20">
    <div class="container mx-auto px-6">
        <div class="max-w-3xl mx-auto">
            
            <!-- Header con progreso -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <span class="text-gray-600">Pregunta</span>
                        <span id="pregunta-actual" class="font-bold text-2xl text-green-600 ml-2">1</span>
                        <span class="text-gray-600">/10</span>
                    </div>
                    <div class="text-right">
                        <div class="text-gray-600">Puntos</div>
                        <div id="puntos-actuales" class="font-bold text-3xl text-orange-600">0</div>
                    </div>
                </div>
                
                <!-- Barra de progreso -->
                <div class="w-full bg-gray-200 rounded-full h-3">
                    <div id="barra-progreso" class="bg-green-600 h-3 rounded-full transition-all duration-300" style="width: 10%"></div>
                </div>
            </div>
            
            <!-- Pregunta -->
            <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12">
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <span class="bg-orange-500 text-white px-4 py-2 rounded-full text-sm font-bold">
                            â±ï¸ <span id="temporizador">15</span>s
                        </span>
                    </div>
                    <h2 id="texto-pregunta" class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">
                        <!-- La pregunta se carga aquÃ­ -->
                    </h2>
                </div>
                
                <!-- Opciones -->
                <div id="opciones-contenedor" class="space-y-4">
                    <!-- Las opciones se cargan aquÃ­ -->
                </div>
            </div>
            
        </div>
    </div>
</section>

<!-- Pantalla de resultados -->
<section id="screen-resultados" class="hidden min-h-screen bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center py-20">
    <div class="container mx-auto px-6">
        <div class="max-w-2xl mx-auto bg-white rounded-3xl shadow-2xl p-8 md:p-12 text-center">
            
            <div id="resultado-icono" class="text-8xl mb-6">ğŸ‰</div>
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                Â¡Terminaste!
            </h2>
            
            <div class="bg-gradient-to-r from-orange-400 to-orange-600 text-white rounded-2xl p-8 mb-8">
                <div class="text-lg mb-2">Tu puntaje final</div>
                <div id="puntos-finales" class="text-6xl font-bold mb-2">0</div>
                <div class="text-lg">de 120 puntos</div>
            </div>
            
            <div id="posicion-jugador" class="bg-green-50 rounded-xl p-6 mb-8">
                <!-- Se carga con JavaScript -->
            </div>
            
            <!-- Leaderboard -->
            <div class="bg-gray-50 rounded-xl p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">ğŸ† Top 5 Recicladores</h3>
                <div id="leaderboard-contenedor" class="space-y-3">
                    <!-- Se carga con JavaScript -->
                </div>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-4">
                <button 
                    onclick="location.reload()"
                    class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition"
                >
                    ğŸ”„ Jugar de Nuevo
                </button>
                <a 
                    href="{% url 'home' %}"
                    class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-lg transition inline-block"
                >
                    ğŸ  Volver al Inicio
                </a>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/quiz.js' %}"></script>
{% endblock %}